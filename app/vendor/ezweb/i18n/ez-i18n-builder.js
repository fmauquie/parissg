define([],function(){var a,b=require.nodeRequire("fs"),c={},d={};return c.load=function(c,e,f,g){a=a||g;for(var h=e.toUrl(c),i=b.readdirSync(h),j=0;j<i.length;j++){var k=i[j].split(".");(2!==k.length||"json"!==k[1])&&console.log("Could not read "+i[j]+": it doesn't follow the 'language.json' format.");var l=k[0].toLowerCase();d[l]=d[l]||{},d[l][c]=b.readFileSync(h+"/"+i[j])}f()},c.write=function(a,b,c){c.asModule(a+"!"+b,'define(function(){return {moduleName:"'+b+'"}})')},c.onLayerEnd=function(){var c=a.localesPrefix||"locales/";c.lastIndexOf("/")!==c.length-1&&(c+="/");var e=a.appDir?a.baseUrl+c:a.out.replace(/\w+\.js$/,c);b.existsSync(e)||b.mkdirSync(e);var f={},g=[];for(var h in d)if(d.hasOwnProperty(h)){f[h]=f[h]||{};var i="{",j=[];for(var k in d[h])d[h].hasOwnProperty(k)&&j.push('"'+k+'":'+d[h][k]);i+=j.join(","),i+="}";var l=h+".json";b.writeFileSync(e+l,i),g.push('"'+h+'":"'+l+'"')}b.writeFileSync(e+"locales.json","{\n"+g.join(",\n")+"\n}")},c});