"use strict";define(["angular","text!../views/header.html","bootstrap","less!../styles/headerbar","less!../styles/app-icons","less!../styles/responsive"],function(a,b){return a.module("ezweb.header.directives",["ezweb.auth"]).directive("ezAppHeader",["ezweb.auth.services.users","ezweb.core.services.win",function(c,d){return{restrict:"EA",transclude:!0,replace:!0,scope:{userProfile:"@",userProfileClick:"&",showMobileIconsPlaceholder:"=",version:"=?",inversedNavbar:"&"},template:b,controller:["$scope","$element","$attrs",function(b,e,f){b.logout=function(){c.logout()},b.hasNoNavbarItem=!0,b.hasMobileTitle=!1,b.hasIconsPlaceholder=!1,b.isNavbarInversed=function(){return a.isDefined(f.inversedNavbar)&&(b.inversedNavbar()||""===f.inversedNavbar)},d.watch(function(){var b=$("header .app-icons"),c=b.innerWidth();a.forEach(b.children("a"),function(a){c-=$(a).outerWidth()}),c-=24,b.children(".placeholder").width(c);var d=$("header #mobile-title"),e=d.innerWidth()-50-60-2;d.children(".placeholder").width(e)}),this.addLoginActions=function(a){a(function(a){e.find(".headerbar .loginActions").append(a)}),a(function(a){e.find("#ez-app-menu-collapse .loginActions").append(a)})},this.addNavbarItem=function(a){b.hasNoNavbarItem=!1,a(function(a){e.find("#ez-app-menu-collapse .menuEntries").append(a)})},this.addNavbarItemToMobileTitle=function(a){b.hasNoNavbarItem=!1,a(function(a){a.addClass("hidden-xs"),e.find("#ez-app-menu-collapse .menuEntries").append(a)}),b.hasMobileTitle=!0,a(function(a){e.find("#mobile-title .placeholder .mobile-title").append(a)})},this.addIconsPlaceholder=function(a){b.hasIconsPlaceholder=!0,a(function(a){e.find(".app-icons .placeholder").append(a)}),b.hasMobileTitle=!0,a(function(a){e.find("#mobile-title .placeholder .icons-placeholder").append(a)})}}]}}]).directive("ezLoginActions",[function(){return{restrict:"EA",transclude:!0,scope:!1,require:"^ezAppHeader",link:function(a,b,c,d,e){d.addLoginActions(e)}}}]).directive("ezNavbarItem",[function(){return{restrict:"A",transclude:"element",priority:1e4,terminal:!0,scope:!1,require:"^ezAppHeader",link:function(a,b,c,d,e){"true"===c.ezMobileTitle?d.addNavbarItemToMobileTitle(e):"true"===c.ezIconsPlaceholder?d.addIconsPlaceholder(e):d.addNavbarItem(e)}}}]).directive("bsNavbar",["$location",function(b){return{restrict:"A",link:function(c,d){c.$watch(function(){return b.path()},function(b){$("li[data-match-route]",d).each(function(c,d){var e=a.element(d),f=e.attr("data-match-route"),g=new RegExp("^"+f+"$",["i"]);if(g.test(b)){e.addClass("active");var h=e.find(".collapse.in");h.length&&h.collapse("hide")}else e.removeClass("active")})})}}}])});