"use strict";define(["angular","text!../views/modal.html","bootstrap","less!../styles/modal"],function(a,b){a.module("ezweb.modal.directives",[]).directive("ezModal",[function(){return{restrict:"E",transclude:!0,template:b,scope:{api:"=?",toggle:"=?",size:"@",keyboard:"&",backdrop:"&",ezTitle:"@",ezCloseButton:"&",onShow:"&",onShown:"&",onHide:"&",onHidden:"&",formClasses:"@"},controller:["$scope","$element",function(b,c){b.api=this,b.footer=!1,this.footerTranscludeFns=[],this.$modal=c.find(".ez-modal:first"),a.forEach(["toggle","show","hide"],a.bind(this,function(b){this[b]=a.bind(this,function(){this.$modal.modal(b)})}))}],link:function(b,c,d,e){if(a.forEach(e.footerTranscludeFns,function(a){b.footer=!0,a(function(a){e.$modal.find(".modal-footer").append(a)})}),a.forEach(["show","shown","hide","hidden"],function(d){c.find(".ez-modal:first").on(d+".bs.modal",function(c){var e=function(){b["on"+a.uppercase(d[0])+d.substr(1)]({$event:c})};b.$root.$$phase?e():b.$apply(e)})}),a.isDefined(d.ezCloseButton)?b.$watch("ezCloseButton()",function(a){b.ezClose=a}):b.ezClose=!0,a.isDefined(d.toggle)){var f=b.onHide;b.onHide=function(a){b.toggle=null,f({$event:a})},b.$watch("toggle",function(a){a?e.show():e.hide()})}e.$modal.modal({keyboard:a.isDefined(d.keyboard)?b.keyboard():!0,backdrop:b.backdrop(),show:!1}),b.$on("$destroy",function(){e.$modal.off(".bs.modal")})}}}]).directive("ezModalFooter",[function(){return{restrict:"E",require:"^ezModal",transclude:!0,link:function(a,b,c,d,e){d.footerTranscludeFns.push(e)}}}])});