define(["angular","text!../views/loadingIndicator.html","text!../views/notification.html","less!../styles/ezweb","less!../styles/loadingIndicator","less!../styles/utilities","../services/winServices"],function(a,b,c){"use strict";return a.module("ezweb.core.directives.utilities",["ezweb.core.services.win"]).directive("ezFocus",["$timeout",function(a){return{scope:{trigger:"&ezFocus"},link:function(b,c,d){var e=function(){a(function(){var a=c.is("input,select,textarea")?c:c.find("input,select,textarea");a.length>0&&a[0].focus()})};d.ezFocus.length>0?b.$watch("trigger()",function(a){a===!0&&e()}):e()}}}]).directive("ezLoadingIndicator",[function(){return{restrict:"AE",scope:{message:"@",showWhen:"&"},template:b}}]).directive("ezCenterInWindow",["ezweb.core.services.win",function(a){return{restrict:"A",link:function(b,c){c.css("position","absolute"),a.watch(function(a){c.css("top",a.height/2-c.height()/2+"px"),c.css("left",a.width/2-c.width()/2+"px")})}}}]).directive("ezFullWindow",["ezweb.core.services.win",function(a){return{restrict:"A",link:function(b,c){c.css("position","absolute"),c.css("top","0px"),c.css("left","0px"),a.watch(function(a){c.css("height",""+a.height+"px"),c.css("width",""+a.width+"px")})}}}]).directive("ezNotification",["$rootScope",function(b){return{restrict:"E",template:c,scope:{},controller:["$scope",function(c){c.messages=[],c.defaultOptions={title:null,content:"",dismissable:!0,timeout:null,type:"info"},b.$onMessage("ezweb.notification.message",function(b,d){var e=a.copy(c.defaultOptions);a.extend(e,d),a.element(e.content).find("a").addClass("alert-link"),c.messages.push(e)})}]}}]).directive("ezFixedPosition",["$timeout","ezweb.core.services.win",function(a,b){return{restrict:"A",scope:{x:"&",y:"&"},link:function(c,d){a(function(){d.addClass("ez-fixed-position");var a=d.outerWidth(),e=d.outerHeight();c.$watch("x()",function(c){var e=c;c+a>=b.size.width&&(e=b.size.width-a-2),0>=e&&(e=1),d.css("left",""+e+"px")}),c.$watch("y()",function(a){var c=a;a+e>=b.size.height&&(c=b.size.height-e-2),0>=c&&(c=1),d.css("top",""+c+"px")})})}}}]).directive("ezIe8FindDirectiveNames",["$injector","orderByFilter",function(b,c){function d(a,b){return b=b||"-",a.replace(f,function(a,c){return(c?b:"")+a.toLowerCase()})}function e(c,f){var g=!1;if(a.forEach(f,function(a,b){c===b?g=!0:"recursive"===a&&0===c.indexOf(b)&&(g=!0)}),g===!0)return[];f[c]=!0;var h=a.module(c),i=[];return a.forEach(h.requires,function(a){Array.prototype.push.apply(i,e(a,f))}),a.forEach(h._invokeQueue,function(a){if("directive"===a[1]){var c=a[2][0],e=b.get(a[2][0]+"Directive")[0];e.restrict.indexOf("E")>=0&&i.push(d(c))}}),i}var f=/[A-Z]/g;return{restrict:"A",template:"<div>{{names | json}}</div>",scope:{ezIe8FindDirectiveNames:"@",ezIe8Excludes:"&"},controller:["$scope","$element","$attrs",function(b,d,f){var g={},h=function(a){"*"===a[a.length-1]?g[a.substr(0,a.length-1)]="recursive":g[a]=!0},i=b.ezIe8Excludes();if(i)if(a.isString(i))h(i);else{if(!a.isArray(i))throw"Can't parse excludes. Is is a string or array ?";a.forEach(i,function(a){h(a)})}else"ezweb"!==b.ezIe8FindDirectiveNames&&(h("ezweb*"),h("ng*"));b.names=c(e(a.isDefined(f.ezIe8FindDirectiveNames)?b.ezIe8FindDirectiveNames:"app",g),a.identity)}]}}])});